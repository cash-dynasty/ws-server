import express, {Express, Request, Response} from 'express'import {createServer} from 'node:http';import {Server} from 'socket.io';import axios from "axios";const app: Express = express();const server = createServer(app);const io = new Server(server, {    cors: {        origin: '*',        methods: ['GET', 'POST']    }});app.get('/', (req: Request, res: Response) => {    res.send('<h1>Hello world</h1>')});const onlineUsers = new Map();io.on('connection', (socket) => {    socket.on('userConnected', (userId) => {        onlineUsers.set(userId, socket.id);        io.emit('onlineUsers', onlineUsers.size)    })    socket.on('sendChatMessage', async (data) => {        const incommingMessage = await axios.post(`http://localhost:3000/api/chat`, {            message: data.message,            fromId: data.userId,            conversation: data.conversation        })        const sendToSocket = onlineUsers.get('53cb11d7-48b0-4958-a722-5bfc3f8e3d72');        if (incommingMessage.data.data.id) {            io.emit('chat', incommingMessage.data.data)        }    })    socket.on('disconnect', () => {        const findMe = onlineUsers.get(socket.id)        console.log('findMe', findMe)        // onlineUsers.delete(socket.id);        io.emit('onlineUsers', onlineUsers.size)    });});server.listen(3001, () => {    console.log('server running at port 3001');});